<html>
    <body>
        <canvas 
            id="c" 
            style="padding-top:5" 
            width="500" 
            height="587"
            onMouseDown="javascript:startRect(event);"
            onMouseMove="javascript:drawRect(event);"
            onMouseUp="javascript:endRect(event);">canvas not supported</canvas>
        <div id="x">n/a</div>
        <div id="y">n/a</div>
        <div id="z">n/a</div>
        <script>

            var drawing;
            var rectStartX;
            var rectStartY;
            var rectEndX;
            var rectEndY;

            var c = document.getElementById("c");
            var context = c.getContext("2d");
            context.strokeRect(0, 0, c.width, c.height);
            imageObj = new Image();
            imageObj.onload = function() { 
                context.drawImage(imageObj, 0, 0, 500, 500 * imageObj.height / imageObj.width)
            }
            imageObj.src = "skoropis.jpeg";

            function startRect(event) {
                drawing = true;
                rectStartX = event.x-5;
                rectStartY = event.y-10;
            }

            function drawRect(event) {
                if (drawing) {
                    rectEndX = event.x-5;
                    rectEndY = event.y-10;
                    context.setLineDash([5, 3]);
                    context.clearRect(0, 0, c.width, c.height);
                    context.drawImage(imageObj, 0, 0, 500, 500 * imageObj.height / imageObj.width)
                    context.strokeRect(rectStartX, rectStartY, rectEndX-rectStartX, rectEndY-rectStartY);
                }
            }


            function endRect(event) {
                drawing = false;
                
            }

        </script>
    </body>
</html>